// seeds.js
// Professional Country Seeder for KitHelp Database
// Seeds international country codes and names for recipe categorization.

import mongoose from 'mongoose';
import dotenv from 'dotenv';
import Country from '../models/Country.js';

dotenv.config();

const MONGO_URI = process.env.MONGO_URI || 'mongodb://127.0.0.1:27017/kithelp';

const countries = [
  { code: 'IN', name: 'India' },
  { code: 'US', name: 'United States' },
  { code: 'GB', name: 'United Kingdom' },
  { code: 'JP', name: 'Japan' },
  { code: 'CN', name: 'China' },
  { code: 'IT', name: 'Italy' },
  { code: 'FR', name: 'France' },
  { code: 'MX', name: 'Mexico' },
  { code: 'BR', name: 'Brazil' },
  { code: 'AU', name: 'Australia' },
  { code: 'EG', name: 'Egypt' },
  { code: 'TR', name: 'Turkey' },
  { code: 'DE', name: 'Germany' },
  { code: 'TH', name: 'Thailand' },
  { code: 'KR', name: 'South Korea' },
  { code: 'ES', name: 'Spain' },
  { code: 'CA', name: 'Canada' },
  { code: 'GR', name: 'Greece' },
  { code: 'MA', name: 'Morocco' },
  { code: 'ID', name: 'Indonesia' },
  { code: 'INT', name: 'International' }
];

async function seedCountries() {
  let connection;
  try {
    connection = await mongoose.connect(MONGO_URI);
    console.log(`‚úÖ Connected to MongoDB: ${MONGO_URI}`);

    await Country.deleteMany({});
    await Country.insertMany(countries);
    console.log('üåç Countries seeded successfully.');

    await mongoose.disconnect();
    console.log('üåø Country seeding complete.');
    process.exit(0);
  } catch (err) {
    console.error('‚ùå Country seeding failed:', err);
    if (connection) await mongoose.disconnect();
    process.exit(1);
  }
}

seedCountries();